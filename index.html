<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport content="width=device-width, initial-scale=1.0">
		<title>Juan Antonio</title>
		<meta name="description" content="Emulating the pros since 1995+1. A personal page about nothing.">
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<div id="background"></div>
		<pre id="logo">

░░▒█░█░▒█░█▀▀▄░█▀▀▄░░░█▀▀▄░█▀▀▄░▀█▀░▄▀▀▄░█▀▀▄░░▀░░▄▀▀▄
░░▒█░█░▒█░█▄▄█░█░▒█░░▒█▄▄█░█░▒█░░█░░█░░█░█░▒█░░█▀░█░░█
█▄▄█░░▀▀▀░▀░░▀░▀░░▀░░▒█░▒█░▀░░▀░░▀░░░▀▀░░▀░░▀░▀▀▀░░▀▀░
		</pre>
		<div id="chyron">
			<template id="phrases">
				<div>emulating the pros since 1995+1</div>
				<div>ciao gab che trovi le mie cose</div>
				<div>hooray procrastination!</div>
				<div>made in italy</div>
				<div>stay hydrated</div>
				<div>100% edulcorant free</div>
				<div>you know those very long dedications on the demoscene? well it's pretty much like this but even worse</div>
				<div>this lags on firefox!</div>
			</template>
		</div>
		<div id="links">
			<a href="/blog">blog</a>
			<a href="https://github.com/6a61">github</a>
			<a href="/demos/w95">w95</a>
		</div>
	</body>
	<script>
		const phrases = document.createElement("div");
		phrases.append(document.getElementById("phrases").content.cloneNode(true));

		const marquee = document.createElement("div");
		document.getElementById("chyron").insertBefore(marquee, document.getElementById("chyron").firstChild);

		function changePhrase() {
			const randomInt = Math.floor(Math.random() * phrases.children.length);
			const randomPhrase = phrases.children[randomInt].textContent;

			// Don't repeat phrases more than once

			while (randomPhrase == marquee.textContent && phrases.children.length > 1) {
				randomInt = Math.floor(Math.random() * phrases.children.length);
				randomPhrase = phrases.children[randomInt].textContent;
			}

			marquee.innerHTML = "";

			for (const i in randomPhrase) {
				const c = randomPhrase[i];
				const span = document.createElement("span");

				switch (c) {
				case ' ':
					span.innerHTML = '&nbsp;';
					break;
				default:
					span.innerHTML = c;
					break;
				}

				span.style.animationDelay = -(20 * i) + "ms";

				marquee.append(span);
			}

			const keyframes = [
				{ transform: "translateX(100%)" },
				{ transform: "translateX(-100%)"}
			];

			const timing = {
				duration: Math.max(100 * marquee.childElementCount, 5000),
				iterations: 1
			};

			marquee.animate(keyframes, timing).onfinish = () => {
				changePhrase();
			};
		};

		changePhrase();

		//================================================================================


		let background = document.getElementById("background");

		function createStar(animationTime) {
			let star = document.createElement("div");
			star.className = "background-star";
			star.textContent = "♦";

			let animationDelay = Math.random() * animationTime;
			star.style.animationDuration = animationTime + "s";
			star.style.animationDelay = -animationDelay + "s";

			return star;
		}

		for (let i = 0; i < 50; ++i) {
			let topOffset = Math.random() * 100;
			let star = createStar(8);
			star.style.top = topOffset + "vh";

			background.appendChild(star);
		}

		for (let i = 0; i < 100; ++i) {
			let topOffset = Math.random() * 100;
			let star = createStar(16);
			star.style.top = topOffset + "vh";
			star.style.color = "#808080";

			background.appendChild(star);
		}

		for (let i = 0; i < 200; ++i) {
			let topOffset = Math.random() * 100;
			let star = createStar(32);
			star.style.top = topOffset + "vh";
			star.style.color = "#404040";

			background.appendChild(star);
		}

	</script>
</html>
